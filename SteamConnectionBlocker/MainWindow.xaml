<Window x:Class="SteamConnectionBlocker.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Steam Connection Blocker" 
        Height="600" 
        Width="500"
        ResizeMode="CanMinimize"
        WindowStartupLocation="CenterScreen"
        Background="{StaticResource PrimaryColor}"
        Icon="Resources/logo.ico">

    <Window.Resources>
        <!-- Loading Animation -->
        <Storyboard x:Key="LoadingAnimation" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetName="LoadingEllipse"
                           Storyboard.TargetProperty="(UIElement.RenderTransform).(RotateTransform.Angle)"
                           From="0" To="360" Duration="0:0:1"/>
        </Storyboard>

        <!-- Fade In Animation -->
        <Storyboard x:Key="FadeInAnimation">
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                           From="0" To="1" Duration="0:0:0.5"/>
        </Storyboard>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="{StaticResource SecondaryColor}" Padding="20">
            <StackPanel>
                <!-- Logo -->
                <Image Source="Resources/logo.png" 
                       Width="80" 
                       Height="80" 
                       Margin="0,0,0,15"
                       HorizontalAlignment="Center"
                       RenderOptions.BitmapScalingMode="HighQuality"/>
                
                <TextBlock Text="Steam Connection Blocker" 
                          FontSize="24" 
                          FontWeight="Bold" 
                          Foreground="{StaticResource TextColor}"
                          HorizontalAlignment="Center"/>
                <TextBlock Text="Aile kÃ¼tÃ¼phanesinde aynÄ± anda oynayÄ±n" 
                          FontSize="12" 
                          Foreground="{StaticResource TextSecondaryColor}"
                          HorizontalAlignment="Center"
                          Margin="0,5,0,0"/>
            </StackPanel>
        </Border>

        <!-- Main Content -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="20" x:Name="MainContent">
                
                <!-- Status Section -->
                <Border Background="{StaticResource SecondaryColor}" 
                       CornerRadius="10" 
                       Padding="20"
                       Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="Durum" 
                                  FontSize="16" 
                                  FontWeight="Bold" 
                                  Foreground="{StaticResource TextColor}"
                                  Margin="0,0,0,10"/>
                        
                        <StackPanel Orientation="Horizontal" Margin="0,5,0,0">
                            <Ellipse Width="12" Height="12" x:Name="StatusIndicator" 
                                    Fill="{StaticResource ErrorColor}" 
                                    Margin="0,0,10,0"/>
                            <TextBlock x:Name="StatusText" 
                                      Text="YÃ¼kleniyor..." 
                                      FontSize="14" 
                                      Foreground="{StaticResource TextColor}"/>
                        </StackPanel>

                        <TextBlock x:Name="SteamPathText" 
                                  Text="Steam konumu: AlgÄ±lanÄ±yor..." 
                                  FontSize="12" 
                                  Foreground="{StaticResource TextSecondaryColor}"
                                  Margin="0,10,0,0"
                                  TextWrapping="Wrap"/>
                    </StackPanel>
                </Border>

                <!-- Main Actions -->
                <Border Background="{StaticResource SecondaryColor}" 
                       CornerRadius="10" 
                       Padding="20"
                       Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="Kontroller" 
                                  FontSize="16" 
                                  FontWeight="Bold" 
                                  Foreground="{StaticResource TextColor}"
                                  Margin="0,0,0,15"/>

                        <!-- Block/Unblock Toggle -->
                        <Button x:Name="ToggleBlockButton" 
                               Style="{StaticResource ToggleButtonStyle}"
                               Content="Steam BaÄŸlantÄ±sÄ±nÄ± Engelle"
                               Click="ToggleBlock_Click"
                               IsEnabled="False"
                               Margin="0,0,0,10"/>

                        <!-- Install/Uninstall -->
                        <Grid Margin="0,10,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <Button x:Name="InstallButton" 
                                   Grid.Column="0"
                                   Style="{StaticResource ModernButton}"
                                   Content="Kurulum Yap"
                                   Click="Install_Click"
                                   Margin="0,0,5,0"/>

                            <Button x:Name="UninstallButton" 
                                   Grid.Column="1"
                                   Style="{StaticResource ModernButton}"
                                   Content="KaldÄ±r"
                                   Click="Uninstall_Click"
                                   Margin="5,0,0,0"/>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Troubleshooting Section -->
                <Border Background="{StaticResource SecondaryColor}" 
                       CornerRadius="10" 
                       Padding="20"
                       Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="Sorun Giderme" 
                                  FontSize="16" 
                                  FontWeight="Bold" 
                                  Foreground="{StaticResource TextColor}"
                                  Margin="0,0,0,15"/>

                        <Button Style="{StaticResource ModernButton}"
                               Content="ðŸ”„ Steam'i Yeniden BaÅŸlat"
                               Click="RestartSteam_Click"
                               Margin="0,0,0,10"/>

                        <Button Style="{StaticResource ModernButton}"
                               Content="ðŸ” Firewall KurallarÄ±nÄ± Kontrol Et"
                               Click="CheckFirewall_Click"
                               Margin="0,0,0,10"/>

                        <Button Style="{StaticResource ModernButton}"
                               Content="ðŸ“‚ Steam Konumunu Yeniden AlgÄ±la"
                               Click="DetectSteam_Click"/>
                    </StackPanel>
                </Border>

                <!-- Info Section -->
                <Border Background="{StaticResource SecondaryColor}" 
                       CornerRadius="10" 
                       Padding="15"
                       Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="â„¹ï¸ NasÄ±l KullanÄ±lÄ±r?" 
                                  FontSize="14" 
                                  FontWeight="Bold" 
                                  Foreground="{StaticResource AccentColor}"
                                  Margin="0,0,0,10"/>
                        
                        <TextBlock TextWrapping="Wrap" 
                                  Foreground="{StaticResource TextSecondaryColor}"
                                  FontSize="11"
                                  LineHeight="16">
                            1. "Kurulum Yap" ile firewall kuralÄ±nÄ± oluÅŸturun<LineBreak/>
                            2. Steam'de aÃ§Ä±k oyun varsa kapatÄ±n<LineBreak/>
                            3. "Steam BaÄŸlantÄ±sÄ±nÄ± Engelle" ile Ã§evrimdÄ±ÅŸÄ± moda geÃ§in<LineBreak/>
                            4. ArtÄ±k aile kÃ¼tÃ¼phanesinden oyun oynayabilirsiniz<LineBreak/>
                            5. Bitirince "BaÄŸlantÄ±yÄ± AÃ§" ile normale dÃ¶nÃ¼n
                        </TextBlock>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>

        <!-- Footer -->
        <Border Grid.Row="2" Background="{StaticResource SecondaryColor}" Padding="10">
            <TextBlock x:Name="NotificationText" 
                      Text="" 
                      FontSize="12" 
                      Foreground="{StaticResource TextSecondaryColor}"
                      HorizontalAlignment="Center"
                      TextWrapping="Wrap"
                      TextAlignment="Center"/>
        </Border>

        <!-- Loading Indicator Overlay -->
        <Grid x:Name="LoadingPanel" 
              Grid.RowSpan="3" 
              Visibility="Collapsed" 
              Background="#80000000">
            <Border Background="{StaticResource SecondaryColor}" 
                    CornerRadius="10" 
                    Padding="30"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center">
                <StackPanel>
                    <Ellipse x:Name="LoadingEllipse" 
                            Width="60" 
                            Height="60" 
                            Stroke="{StaticResource AccentColor}" 
                            StrokeThickness="5"
                            StrokeDashArray="8,4"
                            RenderTransformOrigin="0.5,0.5">
                        <Ellipse.RenderTransform>
                            <RotateTransform Angle="0"/>
                        </Ellipse.RenderTransform>
                    </Ellipse>
                    <TextBlock x:Name="LoadingText" 
                              Text="Ä°ÅŸlem yapÄ±lÄ±yor..." 
                              Foreground="{StaticResource TextColor}"
                              FontSize="14"
                              FontWeight="Medium"
                              HorizontalAlignment="Center"
                              Margin="0,15,0,0"/>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Window>
